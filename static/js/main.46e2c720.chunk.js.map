{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageAPI/ImageAPI.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Loading/Loading.js","components/ImagesError/ImagesError.js","components/ImagesNotFound/ImagesNotFound.js","components/ImageInfo/ImageInfo.js","App.js","index.js"],"names":["Searchbar","state","search","handleChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","toast","info","backgroundColor","props","formSubmitHandler","reset","className","onSubmit","this","type","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchImages","name","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","webformatURL","largeImageURL","clickOnImageItem","onClick","src","url","alt","modalRoot","document","querySelector","Modal","handleKeyDown","code","onCloseModal","handleBackdropClick","event","target","window","addEventListener","removeEventListener","createPortal","children","ImageGallery","showModal","imageModal","openModal","closeModal","images","map","el","id","style","height","Button","loadMoreBtn","Loading","textAlign","color","width","timeout","ImagesErrorView","message","role","ImagesnotFound","ImageInfo","error","status","handleBtnChangePage","nextPage","ImageAPI","searchImage","data","hits","handleScroll","setTimeout","scrollBy","top","documentElement","clientHeight","behavior","prevProps","prevState","catch","length","margin","padding","App","handleFormSubmit","autoClose","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.46e2c720.chunk.js","sourcesContent":["import { Component } from 'react';\n\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class Searchbar extends Component {\n    state = {\n        search: '',\n    };\n\n    handleChange = e => {\n        this.setState({ search: e.currentTarget.value.toLowerCase() });\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n\n        if (this.state.search.trim() === '') {\n            return toast.info('Ничего не ввели в поиск! :(', {\n                backgroundColor: '#3f51b5',\n            });\n        }\n\n        this.props.formSubmitHandler(this.state.search);\n        this.reset();\n    };\n\n    reset = () => {\n        this.setState({ search: '' });\n    };\n\n    render() {\n        return (\n            <header className=\"Searchbar\">\n                <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n                    <input\n                        className=\"SearchForm-input\"\n                        type=\"text\"\n                        value={this.state.search}\n                        autoComplete=\"off\"\n                        autoFocus\n                        placeholder=\"Поиск\"\n                        onChange={this.handleChange}\n                    />\n\n                    <button type=\"submit\" className=\"SearchForm-button\">\n                        <span className=\"SearchForm-button-label\">Search</span>\n                    </button>\n                </form>\n            </header>\n        );\n    }\n}\n","function fetchImages(name, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '19044793-8d0b89c981ce143090a5b157d';\n\n    return fetch(\n        `${BASE_URL}?key=${API_KEY}&page=${page}&image_type=photo&orientation=horizontal&per_page=12&q=${name}`,\n    ).then(response => {\n        if (response.ok) {\n            return response.json();\n        }\n        return Promise.reject(new Error('Что-то пошло не так'));\n    });\n}\n\nconst api = {\n    fetchImages,\n};\nexport default api;\n","export default function ImageGalleryItem({\n    webformatURL,\n    largeImageURL,\n    clickOnImageItem,\n}) {\n    return (\n        <li\n            onClick={() => clickOnImageItem(largeImageURL)}\n            className=\"ImageGalleryItem\"\n        >\n            <img\n                src={webformatURL}\n                url={largeImageURL}\n                alt=\"\"\n                className=\"ImageGalleryItem-image\"\n            />\n        </li>\n    );\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n// import './Modal.scss';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n    componentDidMount() {\n        // console.log('Modal componentDidMount');\n        window.addEventListener('keydown', this.handleKeyDown);\n    }\n\n    componentWillUnmount() {\n        // console.log('Modal componentWillUnmount');\n        window.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    handleKeyDown = e => {\n        if (e.code === 'Escape') {\n            // console.log('Нажали ESC, нужно закрыть модалку');\n\n            this.props.onCloseModal();\n        }\n    };\n\n    handleBackdropClick = event => {\n        // console.log('Кликнули в бекдроп');\n\n        // console.log('currentTarget: ', event.currentTarget);\n        // console.log('target: ', event.target);\n\n        if (event.currentTarget === event.target) {\n            this.props.onCloseModal();\n        }\n    };\n\n    render() {\n        return createPortal(\n            <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n                <div className=\"Modal\">{this.props.children}</div>\n            </div>,\n            modalRoot,\n        );\n    }\n}\n","import { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Modal from '../Modal';\nexport default class ImageGallery extends Component {\n    state = {\n        showModal: false,\n        imageModal: '',\n    };\n\n    openModal = largeImageURL => {\n        this.setState({\n            showModal: true,\n            imageModal: largeImageURL,\n        });\n    };\n\n    closeModal = () => {\n        this.setState({\n            showModal: false,\n        });\n    };\n\n    render() {\n        const { showModal, imageModal } = this.state;\n        return (\n            <>\n                <ul className=\"ImageGallery\">\n                    {this.props.images.map(el => (\n                        <ImageGalleryItem\n                            key={el.id}\n                            webformatURL={el.webformatURL}\n                            largeImageURL={el.largeImageURL}\n                            clickOnImageItem={this.openModal}\n                        />\n                    ))}\n                </ul>\n                {showModal && (\n                    <Modal onCloseModal={this.closeModal}>\n                        {\n                            <img\n                                style={{ height: 540 }}\n                                src={imageModal}\n                                alt=\"\"\n                            />\n                        }\n                    </Modal>\n                )}\n            </>\n        );\n    }\n}\n","export default function Button({ loadMoreBtn }) {\n    return (\n        <div className=\"BoxBtn\">\n            <button type=\"button\" className=\"Button\" onClick={loadMoreBtn}>\n                Load more\n            </button>\n        </div>\n    );\n}\n","import Loader from 'react-loader-spinner';\nexport default function Loading() {\n    return (\n        <div style={{ textAlign: 'center' }}>\n            <Loader\n                type=\"Circles\"\n                color=\"#00BFFF\"\n                height={100}\n                width={100}\n                timeout={3000} //3 secs\n            />\n        </div>\n    );\n}\n","export default function ImagesErrorView({ message }) {\n    return (\n        <div role=\"alert\">\n            <p>Извините, что-то пошло не так. Error: {message}</p>\n        </div>\n    );\n}\n","export default function ImagesnotFound() {\n    return (\n        <div style={{ textAlign: 'center' }}>\n            <p>Картинки с таким именем нет</p>\n        </div>\n    );\n}\n","import { Component } from 'react';\nimport ImageAPI from '../ImageAPI/ImageAPI';\n\nimport ImageGallery from '../ImageGallery';\nimport Button from '../Button';\nimport Loading from '../Loading';\nimport ImagesError from '../ImagesError';\nimport ImagesNotFound from '../ImagesNotFound';\n\nexport default class ImageInfo extends Component {\n    state = {\n        images: [],\n        error: null,\n        status: 'idle',\n        page: 1,\n        showModal: false,\n        imageModal: '',\n    };\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.searchImage !== this.props.searchImage) {\n            this.setState({ status: 'pending', page: 1 });\n\n            ImageAPI.fetchImages(this.props.searchImage, this.state.page)\n                .then(data => {\n                    this.setState({\n                        images: data.hits,\n                        status: 'resolved',\n                    });\n                })\n                // ???Catch не работает :(\n                .catch(error => {\n                    this.setState({\n                        error: error,\n                        status: 'rejected',\n                    });\n                });\n        }\n    }\n\n    handleBtnChangePage = () => {\n        const nextPage = this.state.page + 1;\n        this.setState({\n            page: this.state.page + 1,\n        });\n\n        ImageAPI.fetchImages(this.props.searchImage, nextPage).then(data =>\n            this.setState(({ images }) => ({\n                images: [...images, ...data.hits],\n            })),\n        );\n\n        this.handleScroll();\n    };\n\n    handleScroll = () => {\n        setTimeout(() => {\n            window.scrollBy({\n                top: document.documentElement.clientHeight - 160,\n                behavior: 'smooth',\n            });\n        }, 1000);\n    };\n\n    render() {\n        const { images, error, status } = this.state;\n\n        if (status === 'idle') {\n            return <div style={{ textAlign: 'center' }}>Введите в поиск</div>;\n        }\n\n        if (status === 'pending') {\n            return <Loading />;\n        }\n\n        if (status === 'rejected') {\n            return <ImagesError message={error.message} />;\n        }\n\n        if (status === 'resolved') {\n            return images.length ? (\n                <div style={{ margin: '0 auto', padding: 10 }}>\n                    <ImageGallery images={images} />\n                    <Button loadMoreBtn={this.handleBtnChangePage} />\n                </div>\n            ) : (\n                <ImagesNotFound />\n            );\n        }\n    }\n}\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\n\nimport Searchbar from './components/Searchbar';\nimport ImageInfo from './components/ImageInfo';\n\nclass App extends Component {\n    state = {\n        searchImage: '',\n    };\n\n    handleFormSubmit = searchImage => {\n        this.setState({ searchImage });\n    };\n    render() {\n        return (\n            <div className=\"App\">\n                <Searchbar formSubmitHandler={this.handleFormSubmit} />\n                <ImageInfo searchImage={this.state.searchImage} />\n                <ToastContainer autoClose={2000} position=\"top-center\" />\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}